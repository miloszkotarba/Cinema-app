import{_ as E}from"./add-vZ5Esz7A.js";import{a as L}from"./axios-QLjAsgXu.js";import{_ as H,a as $}from"./AlertDisplay-ZM8wSD_9.js";import{h as A}from"./ErrorHandler-0YoZ9Z16.js";import{_ as j,r as m,o as I,h as P,a,c as o,g as y,b as s,w,t as n,d as g,F as p,e as k,i as l,x as v,p as T,f as U,B as F}from"./index-elwunUWg.js";import{f as R}from"./format-G25Q7tmF.js";import{a as B}from"./addMinutes-N3zoCNTI.js";import{_ as K}from"./MainPage-GSCsHXFk.js";/* empty css                                                     */import"./logo-djfQEiQd.js";const J="data:image/svg+xml,%3c?xml%20version='1.0'%20?%3e%3csvg%20id='Layeri'%20viewBox='0%200%20108%20108'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cstyle%3e.cls-1{fill:none;}.cls-2{clip-path:url(%23clip-path);}%3c/style%3e%3cclipPath%20id='clip-path'%3e%3crect%20class='cls-1'%20height='104'%20width='104'%20x='2'%20y='2'/%3e%3c/clipPath%3e%3c/defs%3e%3ctitle/%3e%3cg%20class='cls-2'%3e%3cpath%20d='M84.4,37.06s0,0,0,0v0S84.39,37,84.4,37.06Z'/%3e%3cpath%20d='M19.65,37.49a1.06,1.06,0,0,1-.15-.15,1.1,1.1,0,0,0,.14.11Z'/%3e%3cpath%20d='M84.4,37.06s0,0,0,0v0S84.39,37,84.4,37.06Z'/%3e%3cpath%20d='M88.14,19.89a10.46,10.46,0,0,0-5-1.46,12.11,12.11,0,0,0-1.5-6A12.55,12.55,0,0,0,68.19,6.3a11.43,11.43,0,0,0-4,1.81A12,12,0,0,0,42.4,9.91a13.13,13.13,0,0,0-9.81,3.64,12,12,0,0,0-2.85,4.51,11,11,0,0,0-11,1.36c-4.14,3.33-3.84,8.71-3.74,9.75a12.22,12.22,0,0,0,4.49,8.17,1.1,1.1,0,0,0,.14.11v0l1.76,16.72,4.7,44.67a8,8,0,0,0,8,7.16H73.93a8,8,0,0,0,8-7.16l1.56-14.8-4-.21L77.91,98.46a4,4,0,0,1-4,3.58h-6.4l1.47-47V55l.48-15.21a25.62,25.62,0,0,0,5.07-2c2-1,4-1.91,5.7-1.91A10.54,10.54,0,0,1,84.38,37v0s0,0,0,0,0,0,0,0L82.61,53.79,80.7,71.92l4,.22,1.89-17.93L88.4,37a10.06,10.06,0,0,0,4.82-8.18C93.4,23.21,88.68,20.21,88.14,19.89ZM34.07,102a4,4,0,0,1-4-3.58l-4.7-44.67L23.62,37a10.55,10.55,0,0,1,4.13-1.17c1.73,0,3.66.93,5.7,1.91a25.62,25.62,0,0,0,5.07,2L39,53.33v.07c0,.07,0,.13,0,.2l1.27,40.74v.06c0,.07,0,.13,0,.2l.23,7.44ZM65,54.94V55l-1.47,47H44.47l-.24-7.71v-.06L43,53.34v-.06l-.42-13.34a22.1,22.1,0,0,0,5.77-2.15c2-1,4-1.91,5.7-1.91s3.66.93,5.7,1.91a22.1,22.1,0,0,0,5.77,2.15ZM86.38,33.57a14.77,14.77,0,0,0-6.13-1.69c-2.64,0-5.08,1.17-7.43,2.3-2,1-4,1.91-5.69,1.91s-3.66-.93-5.7-1.91c-2.35-1.13-4.79-2.3-7.43-2.3s-5.08,1.17-7.43,2.3c-2,1-4,1.91-5.7,1.91s-3.65-.93-5.69-1.91c-2.36-1.13-4.79-2.3-7.43-2.3a15,15,0,0,0-6.36,1.8,8,8,0,0,1-2.4-4.9c-.07-.68-.27-4.2,2.26-6.25a7.16,7.16,0,0,1,7.66-.46A15.58,15.58,0,0,0,29,25.28,2,2,0,0,0,31,27l.3,0A2,2,0,0,0,33,24.67c-.08-.52-.69-5.18,2.43-8.28s8.34-3.36,12.52-.73a2,2,0,0,0,2.14-3.38,15,15,0,0,0-3.6-1.66,8.29,8.29,0,0,1,6-4.5A8.62,8.62,0,0,1,61.62,12a2,2,0,0,0,3.36.67,8.06,8.06,0,0,1,4.1-2.48,8.6,8.6,0,0,1,9.1,4.16A8.72,8.72,0,0,1,79,20.19a2,2,0,0,0,2.35,2.35,6.87,6.87,0,0,1,4.74.78c.13.08,3.25,2,3.14,5.41A6,6,0,0,1,86.38,33.57Z'/%3e%3crect%20height='4'%20rx='2'%20ry='2'%20transform='translate(4.31%20-4.29)%20rotate(3.08)'%20width='4'%20x='80'%20y='76'/%3e%3c/g%3e%3c/svg%3e",i=d=>(T("data-v-5206c6a4"),d=d(),U(),d),O={class:"admin-container"},W=i(()=>s("header",null,[s("h1",null,"Seanse"),s("div",{class:"icon"},[s("img",{src:J,alt:"Screenings Icon"})])],-1)),q={class:"indent"},G=i(()=>s("img",{src:E,alt:"Button add"},null,-1)),Q={key:0},X={key:1},Y={key:2},ss={class:"left"},ts={class:"name"},es={class:"light"},as={class:"name"},os={class:"light"},ns={class:"name"},cs={class:"light"},ls={class:"name"},is={class:"light"},rs={class:"name"},ds={class:"light"},_s={class:"reservation"},us=["onClick"],hs={key:0},ms={key:0,class:"reservationsDetails"},ps=i(()=>s("b",null,"-> ",-1)),vs={key:0},ys=i(()=>s("br",null,null,-1)),fs=i(()=>s("span",null,[l("Bilety "),s("b",null,"-> ")],-1)),gs=i(()=>s("br",null,null,-1)),ks=i(()=>s("b",null,"-> ",-1)),ws=i(()=>s("br",null,null,-1)),xs={style:{"margin-left":"70px"}},Ss={key:1},bs={class:"right"},Ms=["onClick"],Cs={__name:"Screenings",setup(d){const _=m(null),f="https://api.kino-screenix.pl/api/v1/screenings",x=m([]),S=m(!0),h=m(null),D=e=>{h.value=h.value===e?null:e},b=async()=>{try{const e=await L.get(f);x.value=e.data.screenings}catch(e){A(e,_)}finally{S.value=!1}},N=async e=>{try{await L.delete(f+`/${e}`),await b(),$.addAlert("Usunięto seans.","success","/admin/seanse")}catch(r){A(r,_)}},V=e=>M(e,"normalny"),Z=e=>M(e,"ulgowy"),M=(e,r)=>{let u=0;for(const t of e)t.typeOfSeat===r&&u++;return u};return I(b),(e,r)=>{const u=P("RouterLink");return a(),o(p,null,[y(H),s("div",O,[W,s("div",q,[y(u,{to:{name:"adminSeanseCreate"},class:"btn-add",style:{"text-decoration":"none"}},{default:w(()=>[G]),_:1}),_.value?(a(),o("div",Q,n(_.value),1)):g("",!0),S.value?(a(),o("div",X,"Loading...")):(a(),o("div",Y,[(a(!0),o(p,null,k(x.value,t=>(a(),o("div",{key:t._id,class:"screening"},[s("div",ss,[s("span",ts,[l("Film: "),s("span",es,n(t.movie.title),1)]),s("span",as,[l("Data rozpoczęcia: "),s("span",os,n(v(R)(t.date,"yyyy-MM-dd HH:mm")),1)]),s("span",ns,[l("Data zakończenia: "),s("span",cs,n(v(R)(v(B)(v(B)(t.date,t.advertisementsDuration),t.movie.duration),"yyyy-MM-dd HH:mm")),1)]),s("span",ls,[l("Sala: "),s("span",is,n(t.room.name),1)]),s("span",rs,[l("Czas reklam: "),s("span",ds,n(t.advertisementsDuration)+" min",1)]),s("div",_s,[s("div",{class:"showReservations name",onMouseover:r[0]||(r[0]=(...c)=>e.changeCursor&&e.changeCursor(...c)),onClick:c=>D(t._id)},n(h.value===t._id?"Ukryj rezerwacje":"Pokaż rezerwacje"),41,us),h.value===t._id?(a(),o("div",hs,[t.reservations&&t.reservations.length?(a(),o("div",ms,[(a(!0),o(p,null,k(t.reservations,(c,As)=>(a(),o("div",{class:"singleReservation",key:c.id},[l(" Miejsca "),ps,(a(!0),o(p,null,k(c.seats,(C,z)=>(a(),o("span",{key:C.id},[l(n(C.seatNumber)+" ",1),z!==c.seats.length-1?(a(),o("span",vs,", ")):g("",!0)]))),128)),ys,fs,s("span",null,"normalne: "+n(V(c.seats))+" / ",1),s("span",null,"ulgowe: "+n(Z(c.seats)),1),gs,l(" Klient "),ks,s("span",null,n(c.client.firstName)+" "+n(c.client.lastName),1),l(),ws,s("span",xs,n(c.client.email),1)]))),128))])):(a(),o("div",Ss," BRAK REZERWACJI "))])):g("",!0)])]),s("div",bs,[y(u,{to:{name:"EditScreening",params:{id:t._id}},class:"btn btn-edit",style:{"text-decoration":"none",color:"black"}},{default:w(()=>[l(" Edytuj ")]),_:2},1032,["to"]),s("button",{onClick:c=>N(t._id),class:"btn btn-delete"},"Usuń",8,Ms)])]))),128))]))])])],64)}}},Ls=j(Cs,[["__scopeId","data-v-5206c6a4"]]),js={__name:"ScreeningsView",setup(d){return(_,f)=>(a(),F(K,null,{PageContent:w(()=>[y(Ls)]),_:1}))}};export{js as default};
