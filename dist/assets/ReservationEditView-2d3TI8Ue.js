import{E as $}from"./EmptyTop-cOPrCTTz.js";import{_ as L}from"./appointment-7HIqPU4-.js";import{_ as B}from"./confirm-mMVicetq.js";import{a as E}from"./axios-QLjAsgXu.js";import{h as D}from"./ErrorHandler-0YoZ9Z16.js";import{_ as C,a as k}from"./AlertDisplay-ZM8wSD_9.js";import{_ as F,u as M,j as T,r as c,o as U,a as l,c as d,g as m,b as e,t as i,x as H,i as u,F as R,y as x,p as Z,f as O,s as P}from"./index-elwunUWg.js";import{p as q}from"./parseISO-Xhmvrwg8.js";import{f as G}from"./format-G25Q7tmF.js";import{p as J}from"./pl-j07-MAlc.js";/* empty css                                                     */const s=_=>(Z("data-v-ea0f94a2"),_=_(),O(),_),K={class:"wrapper"},Q={class:"main-title"},W={class:"left"},X=s(()=>e("div",{class:"right"},[e("img",{src:L,alt:"Appointment"})],-1)),Y={key:0,class:"load"},ee=s(()=>e("div",{class:"one"},null,-1)),te=s(()=>e("div",{class:"two"},null,-1)),se=s(()=>e("div",{class:"three"},null,-1)),ae=[ee,te,se],oe={key:1,class:"not-found"},ne=s(()=>e("div",{class:"title"},"Nie ma rezerwacji o takim ID.",-1)),ie=[ne],re={key:2},ce=P('<div class="alert-box" data-v-ea0f94a2><div class="content" data-v-ea0f94a2><div class="text" data-v-ea0f94a2><div data-v-ea0f94a2>Rezerwacja została anulowana</div><img src="'+B+'" alt="confirmIcon" data-v-ea0f94a2></div><div class="text2" data-v-ea0f94a2> Potwierdzenie tej operacji zostało wysłane na adres e-mail. </div><div class="text2" data-v-ea0f94a2> Zwrot kosztów zakupu biletów nastąpi w ciągu 48h. </div></div></div>',1),le=[ce],de={key:3},_e={class:"container"},ue={class:"left"},ve=s(()=>e("div",{class:"title"},"Dane klienta:",-1)),pe={class:"content"},me=s(()=>e("b",null,"imię i nazwisko:",-1)),fe=s(()=>e("b",null,"email:",-1)),he={class:"right"},we=s(()=>e("div",{class:"title"},"Dane rezerwacji:",-1)),ye={class:"content"},ge=s(()=>e("b",null,"film:",-1)),Ee=s(()=>e("b",null,"data:",-1)),De=s(()=>e("b",null,"sala:",-1)),ke={__name:"ReservationEdit",setup(_){const p="https://api.kino-screenix.pl/api/v1/screenings",f=M(),j=T(),v=f.params.id,h=c(null),w=c(!0),o=c(null),r=c(null),y=c(!1),g=c(!1);function z(t){const a=q(t),n=G(a,"EEEE dd/MM/yyyy, HH:mm",{locale:J});return n.charAt(0).toUpperCase()+n.slice(1)}const b=async()=>{try{const a=(await E.get(p)).data.screenings;o.value=I(a,v),r.value=S(o.value,v),r.value===null&&(g.value=!0)}catch(t){D(t,h),k.addAlert(t,"error")}finally{w.value=!1}},I=(t,a)=>t.find(n=>n.reservations.some(V=>V._id===a)),S=(t,a)=>t&&t.reservations?t.reservations.find(n=>n._id===a):null,N=async()=>{try{const t=o.value._id,a=p+`/${t}/reservations/${v}`,n=await E.delete(a);y.value=!0}catch(t){D(t,h),k.addAlert(t,"error")}},A=()=>{x.dispatch("updateScreeningData",o.value),x.dispatch("updateReservationData",r.value),j.push({path:"/rezerwacja/edycja"})};return U(b),(t,a)=>(l(),d(R,null,[m(C),e("main",null,[e("div",K,[e("div",Q,[e("div",W,"ID rezerwacji: "+i(H(v)),1),X]),w.value?(l(),d("div",Y,ae)):g.value?(l(),d("div",oe,ie)):y.value?(l(),d("div",re,le)):(l(),d("div",de,[e("div",_e,[e("div",ue,[ve,e("div",pe,[e("span",null,[me,u(" "+i(r.value.client.firstName)+" "+i(r.value.client.lastName),1)]),e("span",null,[fe,u(" "+i(r.value.client.email),1)])])]),e("div",he,[we,e("div",ye,[e("span",null,[ge,u(" "+i(o.value.movie.title),1)]),e("span",null,[Ee,u(" "+i(z(o.value.date)),1)]),e("span",null,[De,u(" "+i(o.value.room.name),1)])])])]),e("div",{class:"buttons"},[e("button",{onClick:N},"Anuluj rezerwację"),e("button",{onClick:A},"Zmień miejsca")])]))])])],64))}},xe=F(ke,[["__scopeId","data-v-ea0f94a2"]]),Be={__name:"ReservationEditView",setup(_){return(p,f)=>(l(),d(R,null,[m($),m(xe)],64))}};export{Be as default};
