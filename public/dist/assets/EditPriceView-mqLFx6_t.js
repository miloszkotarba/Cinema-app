import{_ as k,r as l,u as x,o as z,a as h,c as E,g as b,b as e,l as I,m as p,v as u,F as g,p as A,f as B,B as N,w as S}from"./index-elwunUWg.js";import{a as _}from"./axios-QLjAsgXu.js";import{h as m}from"./ErrorHandler-0YoZ9Z16.js";import{_ as T,a as f}from"./AlertDisplay-ZM8wSD_9.js";import{_ as V}from"./MainPage-GSCsHXFk.js";/* empty css                                                     */import"./logo-djfQEiQd.js";const o=i=>(A("data-v-c65a6681"),i=i(),B(),i),$={class:"admin-container"},C={class:"indent"},D=o(()=>e("header",null,"Edycja ceny biletu",-1)),P={class:"field"},M=o(()=>e("label",{for:"name"},"Nazwa biletu",-1)),U={class:"field"},q=o(()=>e("label",{for:"price"},"Cena biletu",-1)),F=o(()=>e("button",{type:"submit",class:"submit-btn"},"Zapisz zmiany",-1)),R={__name:"EditPrice",setup(i){const n="https://api.kino-screenix.pl/api/v1/tickets",c=l(null),r=l({name:"",price:0}),d=x().params.id,v=async()=>{try{const a=(await _.get(n)).data.tickets;if(Array.isArray(a)&&a.length>0){const s=a.find(y=>y._id===d);if(s)r.value=s;else throw new Error("Bilet o podanym ID nie został znaleziony")}else throw new Error("Nieprawidłowa odpowiedź z serwera")}catch(t){m(t,c)}},w=async()=>{try{const t=parseInt(r.value.price,10);if(t<=0||!Number.isInteger(t))return f.addAlert("Cena biletu musi być liczbą całkowitą dodatnią","error");await _.patch(`${n}/${d}`,r.value),f.addAlert("Zaktualizowano cenę biletu.","success","/admin/cennik")}catch(t){m(t,c)}};return z(v),(t,a)=>(h(),E(g,null,[b(T),e("div",$,[e("div",C,[D,e("form",{onSubmit:I(w,["prevent"])},[e("div",P,[M,p(e("input",{type:"text",id:"name","onUpdate:modelValue":a[0]||(a[0]=s=>r.value.name=s),required:"",readonly:!0,disabled:""},null,512),[[u,r.value.name]])]),e("div",U,[q,p(e("input",{type:"number",id:"price","onUpdate:modelValue":a[1]||(a[1]=s=>r.value.price=s),required:""},null,512),[[u,r.value.price]])]),F],32)])])],64))}},Z=k(R,[["__scopeId","data-v-c65a6681"]]),W={__name:"EditPriceView",setup(i){return(n,c)=>(h(),N(V,null,{PageContent:S(()=>[b(Z)]),_:1}))}};export{W as default};
