import{_ as O,r as n,u as U,j as A,k as N,o as W,a as l,c as d,g as v,b as t,F as T,e as q,t as r,l as Q,m as D,v as I,n as V,p as j,f as L}from"./index-elwunUWg.js";import{_ as Y}from"./AlertDisplay-ZM8wSD_9.js";/* empty css                                                    */import{a as P}from"./axios-QLjAsgXu.js";import{h as S}from"./ErrorHandler-0YoZ9Z16.js";import{p as $}from"./parseISO-Xhmvrwg8.js";import{p as F}from"./pl-j07-MAlc.js";import{f as Z}from"./format-G25Q7tmF.js";import{E as H}from"./EmptyTop-cOPrCTTz.js";/* empty css                                                     */const i=u=>(j("data-v-75c9ed61"),u=u(),L(),u),J={class:"booking-box-top"},K={class:"container"},G={id:"steps"},X=["data-desc"],tt={class:"info-wrapper"},et={class:"left"},st={style:{display:"block","font-weight":"300","font-size":"1.5rem"}},ot={class:"title"},at={class:"right"},nt={style:{"font-size":"2rem","font-weight":"300"}},it={class:"wrapper"},ct={class:"ticket-wrapper"},rt={class:"container"},lt={key:0,class:"load"},dt=i(()=>t("div",{class:"one"},null,-1)),ut=i(()=>t("div",{class:"two"},null,-1)),pt=i(()=>t("div",{class:"three"},null,-1)),_t=[dt,ut,pt],mt={key:1,style:{"padding-top":"2.5rem"}},vt=i(()=>t("h1",null,"Wybierz bilety",-1)),ht={class:"table-ticket"},yt=i(()=>t("div",{class:"row header"},[t("div",{class:"ticket-type"},"Rodzaj biletu"),t("div",{class:"ticket-price"},"Cena"),t("div",{class:"ticket-quantity"},"Ilość")],-1)),ft={class:"row"},kt=i(()=>t("div",{class:"ticket-type"},"bilet ulgowy",-1)),wt={class:"ticket-price"},gt={class:"ticket-quantity"},bt={class:"row"},Et=i(()=>t("div",{class:"ticket-type"},"bilet normalny",-1)),Dt={class:"ticket-price"},It={class:"ticket-quantity"},Pt=i(()=>t("button",{class:"btn-action",type:"submit"},"WYBIERZ MIEJSCA >",-1)),St={__name:"TicketQuantity",setup(u){const h="https://api.kino-screenix.pl/api/v1/screenings",y="https://api.kino-screenix.pl/api/v1/tickets",x=n([{number:1,description:"WYBIERZ BILETY",active:!0,done:!1},{number:2,description:"WYBIERZ MIEJSCA",active:!0,done:!1},{number:3,description:"DANE OSOBOWE",active:!0,done:!1},{number:3,description:"PŁATNOŚĆ",active:!0,done:!1},{number:4,description:"PODSUMOWANIE",active:!0,done:!1}]),f=n(null),B=U(),k=A(),w=B.params.id,p=n(!0),a=n(null);n(null);function R(s){const o=$(s),e=Z(o,"EEEE dd/MM/yyyy, HH:mm",{locale:F});return e.charAt(0).toUpperCase()+e.slice(1)}const _=n(null),m=n(null),g=n(null),b=n(null),E=N("store"),M=async()=>{try{if(!w){await k.push({path:"/repertuar"});return}const s=await P.get(h+`/${w}`);a.value=s.data}catch(s){S(s,f)}finally{p.value=!1,E.dispatch("reset")}},z=async()=>{try{const s=await P.get(y),o=s.data.tickets.find(c=>c.name==="ulgowy").price,e=s.data.tickets.find(c=>c.name==="normalny").price;return{ulgowyPrice:o,normalnyPrice:e}}catch(s){return S(s,f),{ulgowyPrice:0,normalnyPrice:0}}finally{p.value=!1}},C=()=>{const s=_.value,o=m.value,e=a?a.value:null,c={ulgowy:s,normalny:o,screeningData:e};E.dispatch("updateFormData",c),k.push({path:"/repertuar/miejsca"})};return W(async()=>{await M();const{ulgowyPrice:s,normalnyPrice:o}=await z();g.value=s,b.value=o}),(s,o)=>(l(),d("main",null,[v(Y),t("div",J,[t("div",K,[t("div",G,[(l(!0),d(T,null,q(x.value,(e,c)=>(l(),d("div",{key:c,class:V({step:!0,active:e.active,done:e.done}),"data-desc":e.description},r(e.number),11,X))),128))]),t("div",tt,[t("div",et,[t("span",st,r(a.value&&R(a.value.date)),1),t("span",ot,r(a.value&&a.value.movie?a.value.movie.title:"")+"/2D",1)]),t("div",at,[t("span",nt,"Sala: "+r(a.value&&a.value.room?a.value.room.name:""),1)])])])]),t("div",it,[t("div",ct,[t("div",rt,[p.value?(l(),d("div",lt,_t)):(l(),d("div",mt,[t("form",{onSubmit:o[2]||(o[2]=Q(e=>C(),["prevent"]))},[vt,t("div",ht,[yt,t("div",ft,[kt,t("div",wt,r(g.value)+" zł",1),t("div",gt,[D(t("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>_.value=e),type:"number",required:""},null,512),[[I,_.value]])])]),t("div",bt,[Et,t("div",Dt,r(b.value)+" zł",1),t("div",It,[D(t("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>m.value=e),type:"number",required:""},null,512),[[I,m.value]])])])]),Pt],32)]))])])])]))}},Tt=O(St,[["__scopeId","data-v-75c9ed61"]]),qt={__name:"TicketQuantityView",setup(u){return(h,y)=>(l(),d(T,null,[v(H),v(Tt)],64))}};export{qt as default};
