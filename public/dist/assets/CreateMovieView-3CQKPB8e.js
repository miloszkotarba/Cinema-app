import{_ as y,r as p,a as _,c as g,g as v,b as e,l as b,m as i,v as l,F as h,p as w,f as x,B as V,w as k}from"./index-elwunUWg.js";import{a as C}from"./axios-QLjAsgXu.js";import{h as U}from"./ErrorHandler-0YoZ9Z16.js";import{_ as q,a as c}from"./AlertDisplay-ZM8wSD_9.js";import{_ as R}from"./MainPage-GSCsHXFk.js";/* empty css                                                     */import"./logo-djfQEiQd.js";const r=n=>(w("data-v-9e290bb7"),n=n(),x(),n),S={class:"admin-container"},M={class:"indent"},D=r(()=>e("header",null,"Dodawanie filmu",-1)),B={class:"field"},z=r(()=>e("label",{for:"title"},"tytuł filmu",-1)),I={class:"field"},N=r(()=>e("label",{for:"director"},"reżyser filmu",-1)),j={class:"field"},E=r(()=>e("label",{for:"relaseYear"},"rok wydania",-1)),F={class:"field"},$=r(()=>e("label",{for:"relaseCountry"},"kraj wydania",-1)),A={class:"field"},J=r(()=>e("label",{for:"duration"},"czas trwania (w min)",-1)),O={class:"field"},P=r(()=>e("label",{for:"ageRestriction"},"ograniczenie wiekowe",-1)),T={class:"field"},Y=r(()=>e("label",{for:"cast"},"aktorzy",-1)),L={class:"field"},W=r(()=>e("label",{for:"genres"},"gatunek",-1)),G={class:"field"},H=r(()=>e("label",{for:"description"},"opis",-1)),K={class:"field"},Q=r(()=>e("label",{for:"poster"},"plakat (zdjęcie)",-1)),X=r(()=>e("button",{type:"submit",class:"submit-btn"},"Dodaj",-1)),Z={__name:"CreateMovie",setup(n){const d="https://api.kino-screenix.pl/api/v1/movies",u=p(null),t=p({title:"",director:"",release:{year:0,country:""},duration:0,ageRestriction:0,cast:"",genres:"",description:"",poster:null}),m=o=>{const a=o.target.files[0];console.log("Wybrany plik:",a),t.value.poster=a},f=async()=>{try{const o=new FormData;o.append("title",t.value.title),o.append("director",t.value.director),o.append("release[year]",t.value.release.year),o.append("release[country]",t.value.release.country),o.append("duration",t.value.duration),o.append("ageRestriction",t.value.ageRestriction),o.append("cast",JSON.stringify(t.value.cast)),o.append("genres",JSON.stringify(t.value.genres)),o.append("description",t.value.description),o.append("poster",t.value.poster);const a=await C.post(d,o,{headers:{"Content-Type":"multipart/form-data"}});t.value={title:"",director:"",release:{year:0,country:""},duration:0,ageRestriction:0,cast:"",genres:"",description:"",poster:null},c.addAlert("Dodano nowy film.","success","/admin/filmy")}catch(o){U(o,u),c.addAlert(o.response.data.error,"error"),console.log("Sprawdź chmod upload")}};return(o,a)=>(_(),g(h,null,[v(q),e("div",null,[e("div",S,[e("div",M,[D,e("form",{onSubmit:b(f,["prevent"]),enctype:"multipart/form-data"},[e("div",B,[z,i(e("input",{type:"text",id:"title","onUpdate:modelValue":a[0]||(a[0]=s=>t.value.title=s),required:""},null,512),[[l,t.value.title]])]),e("div",I,[N,i(e("input",{type:"text",id:"director","onUpdate:modelValue":a[1]||(a[1]=s=>t.value.director=s),required:""},null,512),[[l,t.value.director]])]),e("div",j,[E,i(e("input",{type:"number",id:"relaseYear","onUpdate:modelValue":a[2]||(a[2]=s=>t.value.release.year=s),required:""},null,512),[[l,t.value.release.year]])]),e("div",F,[$,i(e("input",{type:"text",id:"relaseCountry","onUpdate:modelValue":a[3]||(a[3]=s=>t.value.release.country=s),required:""},null,512),[[l,t.value.release.country]])]),e("div",A,[J,i(e("input",{type:"number",id:"duration","onUpdate:modelValue":a[4]||(a[4]=s=>t.value.duration=s),required:""},null,512),[[l,t.value.duration]])]),e("div",O,[P,i(e("input",{type:"number",id:"ageRestriction","onUpdate:modelValue":a[5]||(a[5]=s=>t.value.ageRestriction=s),required:""},null,512),[[l,t.value.ageRestriction]])]),e("div",T,[Y,i(e("input",{type:"text",id:"cast","onUpdate:modelValue":a[6]||(a[6]=s=>t.value.cast=s),required:""},null,512),[[l,t.value.cast]])]),e("div",L,[W,i(e("input",{type:"text",id:"genres","onUpdate:modelValue":a[7]||(a[7]=s=>t.value.genres=s),required:""},null,512),[[l,t.value.genres]])]),e("div",G,[H,i(e("textarea",{class:"description",id:"description","onUpdate:modelValue":a[8]||(a[8]=s=>t.value.description=s),required:""},null,512),[[l,t.value.description]])]),e("div",K,[Q,e("input",{type:"file",id:"poster",onChange:m},null,32)]),X],32)])])])],64))}},ee=y(Z,[["__scopeId","data-v-9e290bb7"]]),ne={__name:"CreateMovieView",setup(n){return(d,u)=>(_(),V(R,null,{PageContent:k(()=>[v(ee)]),_:1}))}};export{ne as default};
