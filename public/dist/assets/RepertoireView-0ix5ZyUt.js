import{a as $}from"./axios-QLjAsgXu.js";import{_ as z}from"./AlertDisplay-ZM8wSD_9.js";import{h as B}from"./ErrorHandler-0YoZ9Z16.js";import{_ as U,r as p,o as V,h as Y,a as n,c as r,g as d,b as e,F as h,e as f,t as u,n as P,w as D,i as b,p as H,f as j}from"./index-elwunUWg.js";import{l as G}from"./pl-j07-MAlc.js";import{f as R}from"./format-G25Q7tmF.js";import{F as K}from"./Footer-uRzAF8G7.js";import{T as O}from"./Top-3D1Vw0P-.js";/* empty css                                                     */const _=m=>(H("data-v-69ebc354"),m=m(),j(),m),Q={class:"booking-box-top"},W={class:"container"},Z=_(()=>e("span",{class:"title"},"Repertuar Kina Screenix",-1)),q={class:"calendar"},A={class:"days"},J=["id","onClick"],X=_(()=>e("div",{class:"icon"},[e("img",{src:"https://vps.miloszkotarba.pl/~vue/tst2/assets/calendar.png",alt:"Calendar Icon"})],-1)),tt={class:"date"},et={class:"wrapper"},st={class:"movie-wrapper"},at=_(()=>e("div",{style:{padding:"0.2rem"}},null,-1)),ot={class:"container"},nt={key:0,class:"load"},rt=_(()=>e("div",{class:"one"},null,-1)),it=_(()=>e("div",{class:"two"},null,-1)),ct=_(()=>e("div",{class:"three"},null,-1)),lt=[rt,it,ct],dt={key:1},_t={class:"left"},pt=["src"],ut={class:"right"},mt={class:"movie-details"},ht={class:"type"},vt=_(()=>e("div",{class:"dimension"},"2D",-1)),gt={class:"duration"},ft={class:"booking"},Dt={__name:"Repertoire",setup(m){const y=p(null),w="https://api.kino-screenix.pl/api/v1/movies",F="https://api.kino-screenix.pl/api/v1/screenings",v=p([]),k=p(new Date),g=p(!0),N=p((()=>{const s=new Date,a=String(s.getDate()).padStart(2,"0"),o=String(s.getMonth()+1).padStart(2,"0"),t=String(s.getFullYear());return`${a}-${o}-${t}`})()),S=async s=>{g.value=!0,N.value=s,v.value=[],setTimeout(async()=>{try{const o=(await $.get(w)).data.movies;for(const t of o){const{_id:i}=t;try{const c=await $.get(F+`?movie=${i}&date=${s}`);if(c.data.total>0){const l=c.data.screenings;v.value.push({...t,screenings:[...l]})}}catch(c){console.error(`Błąd podczas pobierania rezerwacji dla filmu ${t.title}:`,c)}}}catch(a){B(a,y)}finally{g.value=!1}},500)},x=p([]),I=()=>{const s=new Date;s.setDate(s.getDate());const a=s.getDate(),o=s.getMonth(),t=s.getFullYear(),i=["ND","PN","WT","ŚR","CZ","PT","SO"];for(let c=0;c<9;c++){const l=new Date(t,o,a+c),T=`${l.getDate()}-${l.getMonth()+1}-${l.getFullYear()}`,L=i[l.getDay()];x.value.push({id:T,name:L,date:l})}},C=()=>R(k.value,"EEEE dd/MM/yyyy",{locale:G}).toLocaleUpperCase(),E=s=>{const[a,o,t]=s.split("-").map(Number);!isNaN(a)&&!isNaN(o)&&!isNaN(t)?k.value=new Date(t,o-1,a):console.error("Invalid date format.")},M=s=>{const a=new Date(s);return R(a,"HH:mm")};return V(()=>{I(),S(new Date)}),(s,a)=>{const o=Y("RouterLink");return n(),r("main",null,[d(z),e("div",Q,[e("div",W,[Z,e("div",q,[e("div",A,[(n(!0),r(h,null,f(x.value,t=>(n(),r("span",{key:t.id,id:t.id,class:P({now:N.value===t.id}),onClick:i=>{S(t.id),E(t.id)}},u(t.name),11,J))),128))]),X]),e("div",tt,[e("span",null,u(C()),1)])])]),e("div",et,[e("div",st,[at,e("div",ot,[g.value?(n(),r("div",nt,lt)):(n(),r("div",dt,[(n(!0),r(h,null,f(v.value,t=>(n(),r("div",{key:t._id,class:"movie-box"},[e("div",_t,[d(o,{to:{name:"repertuarId",params:{id:t._id}}},{default:D(()=>[e("img",{src:t.posterUrl,alt:"Poster image"},null,8,pt)]),_:2},1032,["to"])]),e("div",ut,[d(o,{class:"title",to:{name:"repertuarId",params:{id:t._id}}},{default:D(()=>[b(u(t.title),1)]),_:2},1032,["to"]),e("div",mt,[e("span",ht,u(t.genres&&t.genres.length>0?t.genres[0].replace(/"/g,""):"Brak gatunku"),1),vt,e("span",gt,"czas trwania: "+u(t.duration)+" min",1)]),e("div",ft,[(n(!0),r(h,null,f(t.screenings,i=>(n(),r("div",{key:i.date,class:"box"},[e("span",null,[d(o,{style:{color:"white","text-decoration":"none"},to:{name:"TicketQuantity",params:{id:i._id}}},{default:D(()=>[b(u(M(i.date)),1)]),_:2},1032,["to"])])]))),128))])])]))),128))]))])])])])}}},yt=U(Dt,[["__scopeId","data-v-69ebc354"]]),Ct={__name:"RepertoireView",setup(m){return(y,w)=>(n(),r(h,null,[d(O),d(yt),d(K)],64))}};export{Ct as default};
